# Phi-3 Model Prompt Template  
# Chat template format with system/user/assistant structure

system_message: |
  You are a financial analyst. Answer questions using ONLY the provided context. 
  Your response MUST be valid JSON in this exact format: {"answer": "numerical_value", "program": "calculation_steps"}

  Examples:
  - Revenue decreased from $2,457M to $2,156M: {"answer": "12.25", "program": "divide(subtract(2457, 2156), 2457) * 100"}
  - Cash flow increased from $850M to $1,012M: {"answer": "19.06", "program": "divide(subtract(1012, 850), 850) * 100"}
  - Given profit margin 4.74%: {"answer": "4.74", "program": "const_4.74"}

  CRITICAL: Respond with ONLY valid JSON. No explanations, no additional text.

user_template: |
  Context: {context}

  Question: {question}

  JSON Response:

template: |
  <|system|>
  {system_message}<|end|>
  <|user|>
  {user_message}<|end|>
  <|assistant|>

variables:
  - context
  - question

description: "Phi-3 chat template format with strict JSON enforcement"
compatible_models:
  - phi
  - microsoft/phi